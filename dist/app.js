"use strict";var express=require("express"),path=require("path"),bodyParser=require("body-parser"),session=require("express-session"),accountRouter=require(path.join(__dirname,"./routers/accountRouter.js")),studentRouter=require(path.join(__dirname,"./routers/studentRouter.js")),app=express();app.use(express.static(path.join(__dirname,"./statics"))),app.use(bodyParser.urlencoded({extended:!1})),app.use(session({secret:"keyboard cat",cookie:{maxAge:6e4}})),app.all("/*",function(e,s,r){e.url.startsWith("/account")||e.session.username?r():s.send('<script>alert("请先登录!");location.href="/account/login"<\/script>')}),app.use("/account",accountRouter),app.use("/student",studentRouter),app.listen(3e3,"127.0.0.1",function(e){e?console.log(e):console.log("start success")});